<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name="generator" content=
    "HTML Tidy for HTML5 for Mac OS X version 5.4.0">
    <title>
      Tokenized Card Payment
    </title>
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' async
    class='remove'></script>
    <script src='utils.js' class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          github: "https://github.com/w3c/webpayments-methods-tokenization/",
          shortName:  "tokenized-card",
          edDraftURI:   "https://w3c.github.io/webpayments-methods-tokenization/",
          specStatus: "unofficial",
          editors: [
                {
                    name:      "Keyur Patel",
                    company:   "Mastercard"
                },
                {   name:       "Kevin Hurley",
                    company:    "Facebook"
                },
                {
                    name:      "Roy McElmurry",
                    company:   "Facebook"
                }
          ],
          useExperimentalStyles: true,
         license:      "w3c-software-doc",
         wg:           "Web Payments Working Group",
         wgURI:        "https://www.w3.org/Payments/WG/",
         wgPublicList: "public-payments-wg",
         issueBase:    "https://github.com/w3c/webpayments-methods-tokenization/issues/",
        localBiblio: {
          "card-network-ids": {
            "href": "https://www.w3.org/Payments/card-network-ids",
            "publisher": "W3C",
            "title": "Card Network Identifiers Approved for use with Payment Request API"
          },
          "EMVCO-TOKENIZATION": {
            "href": "https://www.emvco.com/emv-technologies/payment-tokenisation/",
            "publisher": "EMVCo",
            "title": "EMV® Payment Tokenisation Specification – Technical Framework"
          },
          "EMVCO-3DS": {
            "href": "https://www.emvco.com/emv-technologies/3d-secure/",
            "publisher": "EMVCo",
            "title": "EMV® 3-D Secure"
          },
          "webpayments-crypto": {
            "href": "https://w3c.github.io/webpayments-crypto/",
            "publisher": "W3C",
            "title": "Payment Method Encryption"
          }
        },
      };
    </script>
    <style>
    dt { margin-top: 0.75em; }
    table { margin-top: 0.75em; border-collapse:collapse; border-style:hidden hidden none hidden }
    table thead { border-bottom:solid }
    table tbody th:first-child { border-left:solid }
    table td, table th { border-left:solid; border-right:solid; border-bottom:solid thin; vertical-align:top; padding:0.2em }
    li { margin-top: 0.5em; margin-bottom: 0.5em;}
    </style>
  </head>
  <body>
    <section id="abstract">
      <p>
        This specification defines a Payment Method used by the PaymentRequest
        API [[!payment-request]] to support tokenized card payments.
      </p>
    </section>
    <section id='sotd'>
      <p>
        The working group maintains <a href=
        "https://github.com/w3c/webpayments-methods-tokenization/issues">a list
        of all bug reports that the group has not yet addressed</a>. Pull
        requests with proposed specification text for outstanding issues are
        strongly encouraged.
      </p>
    </section>
    <section class="informative">
      <h2>
        Introduction
      </h2>
      <p>
        This specification is a Payment Method Specification used by the
        PaymentRequest API [[!payment-request]] to support tokenized card
        payments. The tokens anticipated by this specification are "network" or
        "issuer" tokens.
      </p>
      <p>
        Payment networks such as Mastercard, Visa, and American Express provide
        tokenization services for credit cards and debit cards. The intention
        of tokenization is to ensure that a consumer's primary account number
        (PAN) is not exposed to potentially insecure merchant environments. To
        increase the security of payment processing, merchants —or their
        Payment Service Providers (PSPs)— may use tokens along with
        cryptographically generated dynamic data.
      </p>
      <p>
        This document describes a payment method that achieves the security
        goals of EMVCo tokenization specifications, within the usual Payment
        Request API flow. The payment handler achieves this by leveraging
        elements of [[EMVCO-TOKENIZATION]] and [[EMVCO-3DS]].
      </p>
    </section>
    <section id="exampleData">
      <h2>
        Examples
      </h2>
      <section>
        <h3>
          Request Example
        </h3>
        <pre class="example">
const methodData = [{
  supportedMethods: ["tokenized-card"],
  data: {
    supportedNetworks: ['mastercard','visa', 'amex', 'discover', 'jcb','unionpay'],
    supportedTypes: ['credit','debit'],
    keyProviderURL: 'https://pspKeyProvider.example/tokenizedCardPublicKey',
  }
}];

const details = {
  displayItems: [
    {
      label: "Sub-total",
      amount: { currency: "USD", value: "55.00" },
    },
    {
      label: "Sales Tax",
      amount: { currency: "USD", value: "5.00" },
    },
  ],
  total: {
    label: "Total due",
    // The total is USD$65.00 here because we need to
    // add shipping (below). The selected shipping
    // costs USD$5.00.  
    amount: { currency: "USD", value: "65.00" },
  },
};

new PaymentRequest(methodData, details);
        </pre>
      </section>
      <section>
        <h3>
          Response Example
        </h3>
        <p>
          This example shows some fictitious Mastercard-specific response data.
        </p>
        <div class="example">
          <pre>
          {
          displayLast4: "***6789",
          displayExpiryMonth: "02",
          displayExpiryYear: "22",
          displayNetwork: "mastercard",
          encryptedDetails: "QWxobHZ4bU4yWkt1QUFFU05GWjRHb0FCRkE9PQ==", 
          }
        </pre>
          <p>
            When decrypted, the <code>encryptedDetails</code> data would be:
          </p>
          <pre>
          {
          cardNumber: "5413339000001513",
          expiryMonth: "12",
          expiryYear: "20",
          cryptogram: "AlhlvxmN2ZKuAAESNFZ4GoABFA==",
          typeOfCryptogram: "UCAF", // "Universal Card Authentication Field"
          trid: "59812345678",
          eci: "242", // Authorization and final transaction request with UCAF data
          }
        </pre>
        </div>
      </section>
    </section>
    <section id="assumptions">
      <h2>
        Assumptions
      </h2>
      <ul>
        <li>This specification is designed to address these primary use cases:
          <ul>
            <li>Single transaction
            </li>
            <li>Card-on-file payments
            </li>
            <li>Recurring payments
            </li>
          </ul>
          <p>
            See the <a>TokenUsageType</a> for more information.
          </p>
        </li>
        <li>This specification focuses on standardizing data from an arbitrary
        payment handler at transaction time. How provisioning takes place lies
        outside the scope of this specification.
        </li>
        <li>A payment handler MUST be able to access the services of one or
        more <a>Token Service Providers</a>.
        </li>
      </ul>
    </section>
    <section id="method-id">
      <h2>
        Payment Method Identifier
      </h2>
      <p>
        The <a>payment method identifier</a> string for the Tokenized Card
        Payment method is <dfn><code>tokenized-card</code></dfn>.
      </p>
    </section>
    <section data-dfn-for="TokenizedCardRequest" data-link-for=
    "TokenizedCardRequest">
      <h2>
        <dfn>TokenizedCardRequest</dfn> dictionary
      </h2>
      <p>
        This section describes payment method specific data that is supplied as
        part of the <code>data</code> argument to the PaymentRequest
        constructor.
      </p>
      <pre class="idl">
        dictionary TokenizedCardRequest{
          sequence&lt;DOMString&gt;       supportedNetworks;
          sequence&lt;BasicCardType&gt;   supportedTypes;
          sequence&lt;DOMString&gt; supportedCryptogramTypes;
          required DOMString              keyProviderURL;
                   TokenUsageType         usageType;
                   DOMString              payeeID;
        };
      </pre>
      <p>
        The <code>TokenizedCardRequest</code> dictionary contains the following
        members:
      </p>
      <dl>
        <dt>
          <dfn>supportedNetworks</dfn>
        </dt>
        <dd>
          A sequence of identifiers for card networks that the payee accepts.
          W3C maintains a <a data-cite="card-network-ids">list of approved card
          network identifiers</a>.
        </dd>
        <dt>
          <dfn>supportedTypes</dfn>
        </dt>
        <dd>
          A card can be of type "credit", "debit", or "prepaid", as derived
          from the issuer identification number (the first eight digits of the
          <a>primary account number</a> (PAN). The different types are
          represented as the <a>BasicCardType</a> enum.
        </dd>
        <dt>
          <dfn>supportedCryptogramTypes</dfn>
        </dt>
        <dd>
          This member is an optional list of <a>Payment Network</a>-specific
          strings, each one a <dfn>cryptogramType</dfn>. This list describes
          the types of <a>Token Cryptogram</a> accepted by the payee.
        </dd>
        <dt>
          <dfn>usageType</dfn>
        </dt>
        <dd>
          A payee may request a <a>TokenUsageType</a>. If not present, the
          value of this member defaults to "one-time".
        </dd>
        <dt>
          <dfn>payeeID</dfn>
        </dt>
        <dd>
          This Member is an optional <a>Payment Network</a>-specific string
          that the <a>Token Service Provider</a> may use to constrain the token
          for us by a single party. This is called a "merchant identifier" in
          the EMVCO Tokenization Specification.
        </dd>
        <dt>
          <dfn>keyProviderURL</dfn>
        </dt>
        <dd>
          This member designates, via a URL, a public key trusted by the
          <a>Token Service Provider</a>. The source of the key, therefore,
          becomes the effective requestor of the tokenized-card from a <a>Token
          Service Provider</a>'s perspective.
          <p class="issue" title=
          "What public key formats are acceptable, and any constraints?">
            See <a href=
            "https://github.com/w3c/webpayments-crypto/issues/1">What public
            key formats are acceptable, and any constraints? #1</a> .
          </p>
        </dd>
        <dd>
          <p class="issue" title="Linkage to BasicCard Spec" data-number="17">
            The task force is still discussing whether this specification
            should include terms common to Basic Card by reference or redefine
            them in line.
          </p>
        </dd>
      </dl>
    </section>
    <section data-dfn-for="TokenUsageType" data-link-for="TokenUsageType">
      <h2>
        <dfn>TokenUsageType</dfn> enum
      </h2>
      <pre class="idl">
          enum TokenUsageType { "one-time", "card-on-file", "recurring" };
        </pre>
      <dl>
        <dt>
          "<dfn>one-time</dfn>"
        </dt>
        <dd>
          The payee expects to use the token for a single authorization. How
          exactly the payee can use the token (e.g., for a charge, an update to
          the authorization, a partial refund, a second partial shipment, or
          incremental charges) is outside the scope of this specification.
        </dd>
        <dt>
          "<dfn>card-on-file</dfn>"
        </dt>
        <dd>
          The payee expects to re-use the token for as yet uknown future
          transactions, including payer-initiated transactions and
          payee-initiated transactions (e.g., for partial shipment, incremental
          charges, and resubmission use cases). Whether and how the payee
          requests a new <a>Token Cryptogram</a> for future transactions is
          outside the scope of this specification.
        </dd>
        <dt>
          "<dfn>recurring</dfn>"
        </dt>
        <dd>
          The payee expects to re-use the token exclusively for a recurring
          payment according to an agreement with the payer.
        </dd>
      </dl>
    </section>
    <section data-dfn-for="TokenizedCardResponse" data-link-for=
    "TokenizedCardResponse">
      <h2>
        <dfn>TokenizedCardResponse</dfn> dictionary
      </h2>
      <pre class="idl">
        dictionary TokenizedCardResponse {
                       DOMString       displayMaskedCard;
                       DOMString       displayLast4;
           required    DOMString       displayExpiryMonth;
           required    DOMString       displayExpiryYear; 
           required    DOMString       displayNetwork;
           required    DOMString       encryptedDetails;
         };
      </pre>
      <dl>
        <dt>
          <dfn>displayLast4</dfn> member
        </dt>
        <dd>
          It is common for applications to want to display recognizable
          information about the user's card, without revealing sensitive
          credentials. This value may be used as a hint, for the common case of
          displaying the last four digits of the original PAN.
        </dd>
        <dt>
          <dfn>displayMaskedCard</dfn> member
        </dt>
        <dd>
          In some cases, the card issuer may provide an alternative hint to
          <a>displayLast4</a>. Applications MAY use either <a>displayLast4</a>
          or <a>displayMaskedCard</a> as a hint, and SHOULD use only one of
          them to avoid confusion or leaking information.
        </dd>
        <dt>
          <dfn>displayExpiryMonth</dfn> member
        </dt>
        <dd>
          A two-digit string for the actual expiry month of the card in the
          range "01" to "12".
        </dd>
        <dt>
          <dfn>displayExpiryYear</dfn> member
        </dt>
        <dd>
          A four-digit string for the expiry year of the actual card in the
          range "0000" to "9999".
        </dd>
        <dt>
          <dfn>displayNetwork</dfn> member
        </dt>
        <dd>
          The name of the actual <a>Payment Network</a> of the card.
        </dd>
        <dt>
          <dfn>encryptedDetails</dfn> member
        </dt>
        <dd>
          This member is a string that represents <a>EncryptedTokenizedCard</a>
          information, encrypted with the <a data-lt=
          "TokenizedCardRequest.keyProviderURL">keyProviderURL</a> according to
          [[webpayments-crypto]].
        </dd>
      </dl>
      <p class="issue" data-number="38"></p>
      <p class="issue" data-number="40"></p>
      <p class="issue" data-number="42"></p>
      <section data-dfn-for="EncryptedTokenizedCard" data-link-for=
      "EncryptedTokenizedCard">
        <h2>
          <dfn>EncryptedTokenizedCard</dfn> dictionary
        </h2>
        <p>
          This dictionary defines the sensitive data that is to be encrypted.
          Note that the fields of this dictionary do not themselves influence
          the encryption.
        </p>
        <p class="issue" title=
        "Should encryption of tokenized card payment data be optional?"
        data-number="39"></p>
        <pre class="idl">
          dictionary EncryptedTokenizedCard {
           required DOMString       cardNumber;
           required DOMString       expiryMonth;
           required DOMString       expiryYear;
           required DOMString       cryptogram;
                    DOMString       typeOfCryptogram;
                    DOMString       trid;
                    DOMString       eci;
          };
        </pre>
        <dl>
          <dt>
            <dfn>cardNumber</dfn> member
          </dt>
          <dd>
            This member is a <a>Payment Token</a>.
          </dd>
          <dt>
            <dfn>expiryMonth</dfn> member
          </dt>
          <dd>
            A two-digit string of dynamic data in the range "01" to "12"; this
            does not represent the actual expiry month of the card.
          </dd>
          <dt>
            <dfn>expiryYear</dfn> member
          </dt>
          <dd>
            A four-digit string of dynamic data in the range "0000" to "9999";
            this does not represent the actual expiry year of the card.
          </dd>
          <dt>
            <dfn>cryptogram</dfn> member
          </dt>
          <dd>
            This member is a <a>Token Cryptogram</a>. It is <a>Payment
            Network</a>-specific and used to ensure the authenticity of the
            transaction.
          </dd>
          <dt>
            <dfn>typeOfCryptogram</dfn> member
          </dt>
          <dd>
            This member is a <a>Payment Network</a>-specific string that
            describes the <a>Token Cryptogram</a> type.
          </dd>
          <dt>
            <dfn>trid</dfn> member
          </dt>
          <dd>
            This member is a <a>Token Requestor ID</a>, an 11-digit numeric
            value set by the Token Service Provider.
          </dd>
          <dt>
            <dfn>eci</dfn> member
          </dt>
          <dd>
            This member is an <a>Electronic Commerce Indicator</a>, a
            <a>Payment Network</a>-specific string to indicate the results of
            user authentication.
          </dd>
        </dl>
      </section>
    </section>
    <section id="interfacing">
      <h2>
        Interfacing with a payment request
      </h2>
      <section>
        <h3>
          Steps to check if a payment can be made
        </h3>
        <p>
          The <dfn>steps to check if a payment can be made</dfn> by a Payment
          Handler that handles "tokenized-card" takes
          <a>TokenizedCardRequest</a> <var>request</var> as input. It returns
          either true or false:
        </p>
        <ol class="algorithm">
          <li>Let <var>cards</var> be a <a data-cite="infra#list">list</a> of
          <a>cards</a> associated with this payment handler.
          </li>
          <li>If <var>cards</var> <a data-cite="infra#list-is-empty">is
          empty</a>, return false.
          </li>
          <li>Let <var>networks</var> be an empty <code><a data-cite=
          "!WEBIDL#idl-DOMString">DOMString</a></code> sequence.
          </li>
          <li>Let <var>types</var> be an empty <a>BasicCardType</a> sequence.
          </li>
          <li>Let <var>cryptograms</var> be an empty <code><a data-cite=
          "!WEBIDL#idl-DOMString">DOMString</a></code> sequence.
          </li>
          <li>Let <var>usage</var> be the value of
          <var>request</var>["usageType"] if present, otherwise set it to
          "one-time". If the value of <var>usage</var> is not a legal value of
          <a>TokenUsageType</a>, set <var>usage</var> to "one-time".
          </li>
          <li>If <var>request</var>["supportedTypes"] is present, append each
          item in <var>request</var>["supportedTypes"] to <var>types</var>.
          </li>
          <li>If <var>request</var>["supportedNetworks"] is present, append
          each item in <var>request</var>["supportedNetworks"] to
          <var>networks</var>.
          </li>
          <li>If <var>request</var>["supportedCryptogramTypes"] is present,
          append each item in <var>request</var>["supportedCryptogramTypes"] to
          <var>cryptograms</var>.
          </li>
          <li>For each <var>card</var> in <var>cards</var>:
            <ol>
              <li>Let <var>isSupported</var> be the result of running the
              <a>steps to check if an instrument is supported</a>, passing in
              <var>card</var>, <var>networks</var>, <var>types</var>,
              <var>cryptograms</var>, <var>usage</var>
              </li>
              <li>If <var>isSupported</var> is true, then return true.
              </li>
            </ol>
          </li>
          <li>Return false.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          Steps to check if an instrument is supported
        </h3>
        <p>
          The <dfn>steps to check if an instrument is supported</dfn> takes as
          input a <a>card</a> <var>card</var>, a <a data-cite=
          "infra#list">list</a> of <a>type</a> <var>types</var>, a
          <a data-cite="infra#list">list</a> of <a>network</a>
          <var>networks</var>, a <a data-cite="infra#list">list</a> of
          <a>cryptogramType</a> <var>cryptograms</var> and a <a>usageType</a>
          <var>usage</var>. It returns true if the <var>card</var> is
          supported, false otherwise.
        </p>
        <ol class="algorithm">
          <li>If <var>types</var> <a data-cite="!infra#list-is-empty">is
          empty</a> and <var>networks</var> <a data-cite=
          "!infra#list-is-empty">is empty</a>, return true.
          </li>
          <li>If <var>networks</var> <a data-cite="!infra#list-is-empty">is not
          empty</a>:
            <ol>
              <li>If <var>networks</var> does not include the <a>card</a>'s <a>
                network</a>, return false.
              </li>
            </ol>
          </li>
          <li>If <var>types</var> <a data-cite="!infra#list-is-empty">is not
          empty</a>:
            <ol>
              <li>If <var>types</var> does not include the <a>card</a>'s
              <a>type</a>, return false.
              </li>
            </ol>
          </li>
          <li>If <var>cryptograms</var> <a data-cite="!infra#list-is-empty">is
          not empty</a>:
            <ol>
              <li>If <var>cryptograms</var> does not include a
              <a>cryptogramType</a> supported by the <a>payment handler</a>,
              return false.
              </li>
            </ol>
          </li>
          <li>If <var>usage</var> is not supported by the <a>payment
          handler</a>, return false.
          </li>
          <li>Return true.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          Steps to respond to a payment request
        </h3>
        <p>
          The <dfn>steps to respond to a payment request</dfn> are given by the
          following algorithm. If the end user inputs or selects a <a>card</a>
          that meets the constraints of <a>TokenizedCardRequest</a>
          <var>data</var>, the algorithm returns a card as a
          <a>TokenizedCardResponse</a>.
        </p><!-- Are cardholderName, billingAddress, PAR required? -->
        <ol class="algorithm" data-link-for="TokenizedCardResponse">
          <li data-link-for="TokenizedCardRequest">Let <var>networks</var> be
          <var>data</var>["<a>supportedNetworks</a>"], or an empty list if
          <var>data</var>["<a>supportedNetworks</a>"] is missing.
          </li>
          <li data-link-for="TokenizedCardRequest">Let <var>types</var> be
          <var>data</var>["<a>supportedTypes</a>"], or an empty list if
          <var>data</var>["<a>supportedTypes</a>"] is missing.
          </li>
          <li data-link-for="TokenizedCardRequest">Let <var>key</var> be the
          result of fetching <var>data</var>["<a>keyProviderURL</a>"]. In case
          of an error, throw throw an error abort these steps.
          </li>
          <li>Let <var>card</var> be a <a>TokenizedCardResponse</a>.
          </li>
          <li>To provide a hint to help the user select this <a>card</a>,
          either set <var>card</var>["<a>displayLast4</a>"] to a string that
          includes the last four digits of the <a>primary account number</a>
          (e.g., "*** 5050") or set <var>card</var>["<a>displayMaskedCard</a>"]
          to a string that represents different non-sensitive information about
          the card (e.g., "Francine Business").
          </li>
          <li>Set <var>card</var>["<a>displayExpiryMonth</a>"] to two-digit
          string ranging from "<code>01</code>" to "<code>12</code>", or the
          empty string if the user chooses not to provide it or the <a>type</a>
          doesn't require an expiry month.
          </li>
          <li>Set <var>card</var>["<a>displayExpiryYear</a>"] to a four-digit
          string in the range "<code>0000</code>" to "<code>9999</code>", or
          the empty string if the user chooses not to provide it or the
          <a>type</a> doesn't require an expiry year.
          </li>
          <li>Set <var>card</var>["<a>displayNetwork</a>"] to a string that
          identifies the card <a>network</a>.
          </li>
          <li>Set <var>cardNumber</var> to a tokenized representation of
          <a>primary account number</a>, a string of digits that ranges from 10
          to 19 digits.
          </li>
          <li>Set <var>expiryYear</var> to two-digit string ranging from
          "<code>01</code>" to "<code>12</code>", or the empty string if the
          user chooses not to provide it or the <a>type</a> doesn't require an
          expiry month.
          </li>
          <li>Set <var>expiryMonth</var> to a four-digit string in the range
          "<code>0000</code>" to "<code>9999</code>", or the empty string if
          the user chooses not to provide it or the <a>type</a> doesn't require
          an expiry year.
          </li>
          <li>Set <var>cryptogram</var> to a <a>Token Cryptogram</a>, a
          <a>Payment Network</a>-specific string.
          </li>
          <li>Set <var>typeOfcryptogram</var> to a <a>Payment
          Network</a>-specific string that represents the type of the
          <var>cryptogram</var>.
          </li>
          <li>Set <var>trid</var> to a <a>Token Requestor ID</a>, an 11-digit
          numeric value.
          </li>
          <li>Set <var>eci</var> to <a>Electronic Commerce Indicator</a>, a <a>
            Payment Network</a>-specific string.
          </li>
          <li>Set <var>card</var>["<a>encryptedDetails</a>"] to a string
          following the <a>steps for response data encryption</a>, where the
          <a>content encryption key</a> is set to <var>key</var> and the
          <a>plaintext encryption</a> algorithm takes as input
          <var>cardNumber</var>, <var>expiryMonth</var>, <var>expiryYear</var>,
          <var>cryptogram</var>, <var>typeOfcryptogram</var>, <var>trid</var>,
          and <var>eci</var>.
          </li><!-- If billing address is required -->
          <!-- 
          <li>If a billing address is not required for this card <a>type</a>,
          then set <var>card</var>["<a>billingAddress</a>"] to null. Otherwise:
            <ol>
              <li>Let <var>redactList</var> be « "phone" ».
              </li>
              <li>Let <var>billingAddress</var> be the result running the steps
              to <a data-cite=
              "payment-request#dfn-create-a-payment-address">create a
              <code>PaymentAddress</code> from user-provided input</a> with
              <var>redactList</var>.
              </li>
              <li>Set <var>card</var>["<a>billingAddress</a>"] to
              <var>billingAddress</var>.
              </li>
            </ol>
          </li>
          -->
          <li>Return <var>card</var>.
          </li>
        </ol>
        <p class="note" title="Validation">
          Until such time as we learn of intention by browsers/mediators to
          implement this specification, we have eliminated discussion of
          validation in this algorithm.
        </p>
        <p class="issue" data-number="43"></p>
      </section>
    </section>
    <section id="security">
      <h2>
        Security and Privacy Considerations
      </h2>
      <p class="issue" title="Document threat model" data-number="36"></p>
    </section>
    <section id="dependencies">
      <h2>
        Dependencies
      </h2>
      <p>
        This specification relies on several other underlying specifications.
      </p>
      <dl>
        <dt>
          Payment Request API
        </dt>
        <dd>
          The terms <dfn>PaymentAddress</dfn> and <dfn>PaymentRequest
          constructor</dfn> are defined in Payment Request API
          [[payment-request]].
        </dd>
        <dt>
          Payment Method Identifiers
        </dt>
        <dd>
          The term <dfn data-lt="payment method identifiers">payment method
          identifier</dfn> is defined by the Payment Method Identifier
          specification [[!payment-method-id]].
        </dd>
        <dt>
          Basic Card Payment
        </dt>
        <dd>
          The terms <dfn data-cite=
          "!payment-method-basic-card#method-id">basic-card</dfn>,
          <dfn data-cite=
          "!payment-method-basic-card#basiccardtype-enum">BasicCardType</dfn>,
          <dfn data-lt="card" data-cite=
          "!payment-method-basic-card#cards">cards</dfn>, <dfn data-cite=
          "!payment-method-basic-card#type">type</dfn>, <dfn data-lt="network"
          data-cite="!payment-method-basic-card#networks">networks</dfn>,
          <dfn data-cite=
          "!payment-method-basic-card#networks">primary-account-number</dfn>
          are defined in [[!payment-method-basic-card]].
        </dd>
        <dt>
          EMVCo Tokenisation
        </dt>
        <dd>
          The terms <dfn data-cite="!EMVCO-TOKENIZATION">Payment Token</dfn>,
          <dfn data-cite="EMVCO-TOKENIZATION">Token Cryptogram</dfn>,
          <dfn data-lt="Payment Network" data-cite="EMVCO-TOKENIZATION">Payment
          Networks</dfn>, <dfn data-lt="Token Service Provider" data-cite=
          "EMVCO-TOKENIZATION">Token Service Providers</dfn>, <dfn data-cite=
          "EMVCO-TOKENIZATION">Token Requestor ID</dfn>, <dfn data-cite=
          "EMVCO-TOKENIZATION">Merchant Identifier</dfn> and <dfn data-cite=
          "EMVCO-TOKENIZATION">Tokenized Payment Method Credentials</dfn> are
          defined in [[EMVCO-TOKENIZATION]].
        </dd>
        <dt>
          EMVCo 3-D Secure
        </dt>
        <dd>
          The terms <dfn data-cite="!EMVCO-3DS">Electronic Commerce
          Indicator</dfn> is defined in [[EMVCO-3DS]].
        </dd>
        <dt>
          Payment Method Encryption
        </dt>
        <dd>
          The <dfn>steps for response data encryption</dfn> are described in
          [[!webpayments-crypto]]. That specification defines the terms
          <dfn data-cite="!webpayments-crypto#key">content encryption
          key</dfn>, <dfn data-cite="!webpayments-crypto#message">message
          structure</dfn>, and <dfn data-cite=
          "!webpayments-crypto#plaintext-encryption">plaintext
          encryption</dfn>.
        </dd>
        <dt>
          ISO7812-1
        </dt>
        <dd>
          ISO 7812-1 specifies a numbering system for the identification of the
          card issuers, the format of the issuer identification number (IIN)
          and the <dfn data-cite="ISO7812-1">primary account number</dfn>
          (PAN).
        </dd>
      </dl>
    </section>
    <section id="tsp-considerations" class="informative">
      <h2>
        Appendix: Token Service Provider Considerations
      </h2>
      <p>
        The following <a>Token Service Provider</a> considerations are
        explicitly out of scope for this specification.
      </p>
      <ul>
        <li>Any requirement for a KeyProvider to register/onboard with a Token
        Service Provider, for example to establish cryptogram conventions or
        other program-specific requirements.
        </li>
      </ul>
      <p class="issue" title="Out-of-band provisioning" data-number="32"></p>
      <p class="issue" title="Key Provider Registration" data-number="31"></p>
    </section>
    <section id="flow">
      <h2>
        Appendix: Flow Diagrams
      </h2>
      <p>
        <img alt="Tokenized card payment flow" width="100%" src=
        "https://w3c.github.io/webpayments-methods-tokenization/diagrams/tokenization3.png">
      </p>
      <p class="issue" title=
      "Where does tokenisation occur in the the flow - and do we care"
      data-number="16"></p>
    </section>
    <section id="acks">
      <h2>
        Acknowledgments
      </h2>
      <p>
        Thanks to Manash Bhattacharjee for his work on this specification.
      </p>
    </section>
  </body>
</html>
